<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Formulario Parte de servicio</title>
    <link rel="stylesheet" href="css/plantilla-estilos.css">
    <link rel="stylesheet" href="css/global-formularios-estilos.css">
    <link rel="stylesheet" href="css/form-servicio-estilos.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet">
    <link rel="icon" href="images/favico.svg" type="image/x-icon">
</head>

<body id="plantilla-aena">
    <!-- Encabezado -->
    <header class="header header-blue" id="header">
        <div class="header-container">
            <!-- Botón de alternar barra lateral -->
            <button id="toggle-sidebar" class="toggle-button" title="Abrir/Cerrar menú">
                <i class="fa fa-bars"></i>
            </button>

            <div class="header-left">
                <img src="images/aena.svg" alt="Logo AENA" class="header-logo">
                <div class="header-line-and-text">
                    <div class="separator"></div> <!-- Línea -->
                    <span id="header-text" class="header-text">Partes de servicio</span>
                </div>
            </div>
            <div class="language-dropdown">
                <button class="language-button" >
                    <i class="fa fa-comment"></i> ES <i class="fa fa-chevron-down"></i>
                </button>
                <div class="language-bar hidden" id="languageBar">
                    <a href="#" class="language-option selected">ESPAÑOL</a>
                    <a href="#" class="language-option">ENGLISH</a>
                    <a href="#" class="language-option">CATALÀ</a>
                    <a href="#" class="language-option">EUSKARA</a>
                    <a href="#" class="language-option">GALEGO</a>
                    <a href="#" class="language-option">VALENCIÀ</a>
                </div>
            </div>
        </div>

    </header>  

    <!-- Contenido principal -->
    <main class="main-content" >
        <!-- barra lateral -->
        <div class="index-sidebar">
            <div class="index-header">
                <h1 class="index-header-title">
                    <img src="images/airplane_animation.gif" alt="Logo AENA" class="header-logo"> FORMULARIOS 
                    <span class="index-header-subtitle">DE PARTES</span>
                </h1>
            </div>   
            <div class="menu">
                <a href="administrar.html">Administrar</a>
                <a href="parte-servicio.html">Parte de Servicios</a>

                <!-- Menú desplegable -->
                <div class="submenu">
                    <a href="#" class="submenu-toggle">Parte de Patrullas ▾</a>
                    <div class="submenu-content">
                        <a href="patrullas-perimetro.html">Perímetro</a>
                        <a href="patrullas-otras-zonas.html">Otras Zonas</a>
                        <a href="patrullas-acreditaciones.html">Acreditaciones</a>
                        <a href="patrullas-control-indigentes.html">Control de Indigentes</a>
                        <a href="patrullas-alarmas-puertas.html">Alarmas y Puertas</a>
                    </div>
                </div>

                <a href="parte-equipos.html">Parte de Equipos</a>
                <a href="inspeccion-vehiculos.html">Inspección de Vehículos</a>
                <a href="inspeccion-suministros.html">Inspección de Suministros</a>
                <!-- Menú desplegable -->
                <div class="submenu">
                    <a href="#" class="submenu-toggle">Reportes ▾</a>
                    <div class="submenu-content">
                        <a href="reporte-servicio.html">Reporte Servicios</a>
                    </div>
                </div>
                <a href="#">Contáctanos</a>
                <a href="#" id="logout">Salir</a>
            </div>
        </div>
        <div class="index-content">
            <div class="form-container">
                <h1>Formulario de Parte de Servicio</h1>
                <form id="formulario">
                    <!-- Campo Aeropuerto -->
                    <div class="form-row">
                        <div class="form-group">
                            <label for="aeropuerto">Aeropuerto:</label>
                            <select id="aeropuerto" name="aeropuerto" required >
                                <option value="" disabled selected>Seleccione un Aeropuerto</option>
                                <option value="ABC - Albacete">ABC - Albacete</option>
                                <option value="ACE - Lanzarote">ACE - Lanzarote</option>
                                <option value="AEI - Algeciras">AEI - Algeciras</option>
                                <option value="AGP - Málaga-Costa del Sol">AGP - Málaga-Costa del Sol</option>
                                <option value="ALC - Alicante-Elche">ALC - Alicante-Elche</option>
                                <option value="BCN - Barcelona-El Prat">BCN - Barcelona-El Prat</option>
                                <option value="BIO - Bilbao">BIO - Bilbao</option>
                                <option value="BJZ - Badajoz">BJZ - Badajoz</option>
                                <option value="EAS - San Sebastián">EAS - San Sebastián</option>
                                <option value="FUE - Fuerteventura">FUE - Fuerteventura</option>
                                <option value="GMZ - La Gomera">GMZ - La Gomera</option>
                                <option value="GRO - Girona-Costa Brava">GRO - Girona-Costa Brava</option>
                                <option value="HSK - Huesca-Pirineos">HSK - Huesca-Pirineos</option>
                                <option value="IBZ - Ibiza">IBZ - Ibiza</option>
                                <option value="LCG - A Coruña">LCG - A Coruña</option>
                                <option value="LEI - Almería">LEI - Almería</option>
                                <option value="LEJ - León">LEJ - León</option>
                                <option value="LPA - Gran Canaria">LPA - Gran Canaria</option>
                                <option value="MAD - Madrid-Barajas">MAD - Madrid-Barajas</option>
                                <option value="MAH - Menorca">MAH - Menorca</option>
                                <option value="MLN - Melilla">MLN - Melilla</option>
                                <option value="ODB - Córdoba">ODB - Córdoba</option>
                                <option value="OVD - Asturias">OVD - Asturias</option>
                                <option value="PMI - Palma de Mallorca">PMI - Palma de Mallorca</option>
                                <option value="PNA - Pamplona">PNA - Pamplona</option>
                                <option value="REU - Reus">REU - Reus</option>
                                <option value="RGS - Burgos">RGS - Burgos</option>
                                <option value="RJL - Logroño-Agoncillo">RJL - Logroño-Agoncillo</option>
                                <option value="SCQ - Santiago de Compostela">SCQ - Santiago de Compostela</option>
                                <option value="SDR - Santander">SDR - Santander</option>
                                <option value="SLM - Salamanca">SLM - Salamanca</option>
                                <option value="SPC - La Palma">SPC - La Palma</option>
                                <option value="SVQ - Sevilla">SVQ - Sevilla</option>
                                <option value="TFN - Tenerife Norte">TFN - Tenerife Norte</option>
                                <option value="TFS - Tenerife Sur">TFS - Tenerife Sur</option>
                                <option value="VDE - El Hierro">VDE - El Hierro</option>
                                <option value="VGO - Vigo">VGO - Vigo</option>
                                <option value="VIT - Vitoria">VIT - Vitoria</option>
                                <option value="VLC - Valencia">VLC - Valencia</option>
                                <option value="VLL - Valladolid">VLL - Valladolid</option>
                                <option value="XRY - Jerez de la Frontera">XRY - Jerez de la Frontera</option>
                            </select> 
                        </div>

                        <!-- Campo oculto para la Fecha de Registro (se sigue llamando 'fecha') -->
                        <input type="hidden" id="fecha" name="fecha">


                        <div class="form-group">
                            <label>Selecionar fecha:</label>
                            <div style="width: 95%;">
                                <input type="date" id="fechaSeleccionada" name="fechaSeleccionada" required 
                                title="Selecione la fecha">
                            </div>
                        </div>
                        
                        <!-- Campo Horario del turno -->
                        <div class="form-group">
                            <label>Horario del turno:</label>
                            <div style="display: flex; gap: 10px;">
                                <input type="time" id="horaInicio" name="horaInicio" required 
                                title="Ingrese la hora de Inicio" aria-label="Hora de fin">
                                <span>-</span>
                                <input type="time" id="horaFin" name="horaFin" required 
                                title="Ingrese la hora de fin" aria-label="Hora de fin">
                            </div>
                        </div>

                    </div>
                    
                    <div class="form-row2">
                        <!-- Campo Datos de vigilante -->
                        <div class="form-group">
                            <label for="nombre">Nombre del Vigilante:</label>
                            <input type="text" id="nombre-vigilante" name="nombre" placeholder="Indica tu nombre" required>
                        </div>

                        <div class="form-group">
                            <label for="apellido1">Apellido 1:</label>
                            <input type="text" id="apellido1" name="apellido1" placeholder="Indica tu apellido 1" required>
                        </div>
                    
                        <div class="form-group">
                            <label for="apellido2">Apellido 2:</label>
                            <input type="text" id="apellido2" name="apellido2" placeholder="Indica tu apellido 2" required>
                        </div>
                        <!-- Campo TIP -->
                        <div class="form-group">
                            <label for="tip">TIP (Número de Placa):</label>
                            <input type="text" id="tip" name="tip" placeholder="Indica tu número de placa" required>
                        </div>
                    </div>
                    
                    <!-- Material Controlado -->
                    <div class="form-group">
                        <label>Material Controlado:</label>
                        <div>
                            <input type="checkbox" id="Arma" name="material" value="Arma">
                            <label for="arma" class="label-checkbox">Arma</label>

                            <input type="checkbox" id="Linterna" name="material" value="Linterna">
                            <label for="linterna" class="label-checkbox">Linterna</label>

                            <input type="checkbox" id="Llaves" name="material" value="Llaves">
                            <label for="llaves" class="label-checkbox">Llaves</label>

                            <input type="checkbox" id="Walkies" name="material" value="Walkies">
                            <label for="walkies" class="label-checkbox">Walkies</label>

                            <input type="checkbox" id="Vehiculo" name="material" value="Vehiculo">
                            <label for="vehiculo" class="label-checkbox">Vehículo</label>

                            <!-- Checkbox "Otros" -->
                            <input type="checkbox" id="otros" name="material" value="Otros" onclick="toggleOtrosInput()">
                            <label for="otros" class="label-checkbox">Otros</label>

                            <!-- Input para escribir el material personalizado (oculto por defecto) -->
                            <input type="text" id="otros-material" name="otros-material" placeholder="Especifique otro material" style="display: none; margin-left: 10px;">
                        </div>
                    </div>

                    <!-- Leído Normativa -->
                    <div class="form-group">
                        <label>Leído Normativa:</label>
                        <div>
                            <input type="radio" id="normativa-si" name="normativa" value="Si">
                            <label for="normativa-si" class="label-radio">Sí</label>
        
                            <input type="radio" id="normativa-no" name="normativa" value="No">
                            <label for="normativa-no" class="label-radio">No</label>
                        </div>
                    </div>
        
                    <!-- Campo Accidentes del Puesto -->
                    <div class="form-group">
                        <label>Accidentes del Puesto:</label>
                        <div>
                            <input type="radio" id="accidente-si" name="accidentes" value="Si">
                            <label for="accidente-si" class="label-radio">Sí</label>
        
                            <input type="radio" id="accidente-no" name="accidentes" value="No">
                            <label for="accidente-no" class="label-radio">No</label>
                        </div>
                    </div>

                    <!-- Tabla de Inspección Diario de Vehículos -->
                    <button type="button" id="toggle-tabla-vehiculos" class="boton-toggle">
                        Mostrar Tabla de Inspeccion de Vehículos
                    </button>

                    <!-- Contenedor ocultable -->
                    <div id="contenedor-tabla-vehiculos">
                        <div class="form-group">

                            <table id="tabla-inspeccion-vehiculos" class="tabla-inspeccion-vehiculos">
                                <thead>
                                  <tr>
                                    <th>Hora</th>
                                    <th>Matrícula</th>
                                    <th>Revisión</th>
                                    <th>Revisión</th>
                                    <th>Estado</th>
                                    <th>Observaciones</th>
                                    <th>Eliminar</th>
                                  </tr>
                                </thead>
                                <tbody>
                                  <tr>
                                    <td><input type="time" name="horaVehiculo[]"></td>
                                    <td><input type="text" name="matriculaVehiculo[]" placeholder="Matrícula"></td>
                                    <td>
                                        <button type="button" class="btn-detalles" onclick="abrirModal(this)">🛠 Detalles</button>
                                    </td>
                                    <td><textarea type="text" name="detalles" placeholder="Seleccione los distintos detalles"></textarea></td>
                                    <td>
                                      <select name="revisionVehiculo[]">
                                        <option value="">Seleccionar</option>
                                        <option value="OK">OK</option>
                                        <option value="NO OK">NO OK</option>
                                      </select>
                                    </td>
                                    <td><textarea type="text" name="observacionesVehiculo[]" placeholder="Ingresar observación relevante (opcional)"></textarea></td>

                                    <td>
                                      <button type="button" class="btn-eliminar" onclick="eliminarFila(this)">
                                        <i class="fa fa-trash"></i>
                                      </button>
                                    </td>
                                  </tr>
                                </tbody>
                              </table>

                            <button type="button" class="btn-agregar btn-vehiculo" onclick="agregarFila()">
                                <i class="fas fa-plus-circle"></i> Agregar Vehículo
                            </button>
                        </div>
                    </div>

                    <!-- ✅ Modal oculto de revisión de vehículos -->
                    <div id="modalRevision" class="modal">
                        <div class="modal-content">
                        <h3 id="tituloModal">Checklist de Revisión del Vehículo</h3>
                    
                        <div class="grupo">
                            <label><input type="checkbox" name="lucesCuadro"> Chequeo luces/avería cuadro</label>
                            <label><input type="checkbox" name="cinturon"> Cinturón de seguridad</label>
                            <label><input type="checkbox" name="limpiaparabrisas"> Limpiaparabrisas</label>
                            <label><input type="checkbox" name="retrovisores"> Estado retrovisores</label>
                        </div>
                    
                        <div class="grupo">
                            <label><input type="checkbox" name="lucesVehiculo"> Luces vehículo</label>
                            <label><input type="checkbox" name="lucesAC"> Puente de luces / A/C</label>
                            <label><input type="checkbox" name="emisora"> Emisora TWR/TETRA</label>
                            <label><input type="checkbox" name="neumaticos"> Estado neumáticos</label>
                        </div>
                    
                        <div class="grupo">
                            <label><input type="checkbox" name="fugas"> Presencia de fugas</label>
                            <label><input type="checkbox" name="direccionFrenos"> Dirección y frenos</label>
                            <label><input type="checkbox" name="elementosAsegurados"> Elementos asegurados</label>
                            <label><input type="checkbox" name="planoEXA"> Presencia de plano EXA-37</label>
                        </div>
                    
                        <div class="modal-buttons">
                            <button type="button" onclick="guardarChecklist()">Guardar</button>
                            <button type="button" onclick="cerrarModal()">Cancelar</button>
                        </div>
                        </div>
                    </div>

                    <div class="form-group">
                        <label>Descripciones del Servicio:</label>

                        <!-- Campo Descripción del Servicio -->
                        <div id="descripcion-container">
                            <div class="descripcion-item">
                                
                                <!-- Columna 1: Hora -->
                                <div class="horario">
                                    <div id="nombre-vigilante-container" class="nombre-vigilante">
                                        <label id="label-nombre-vigilante">Nombre</label>
                                    </div>                                    
                                    <div class="horario-item">
                                        <label for="hora-inicio">Hora</label>
                                        <input type="time" name="hora-inicio" required>
                                    </div>
                                </div>
                                <!-- Columna 2: Descripción del servicio -->
                                <textarea name="descripcion-servicio" placeholder="Describe el servicio realizado" required></textarea>
                                <!-- Columna 3: Acción tomada -->
                                <textarea name="descripcion-accion" placeholder="Describe la acción tomada (opcional)"></textarea>
                                <!-- Columna 4: Verificación + Checkbox incidencia -->
                                <div class="verificacion-container">
                                    <!-- Contenedor de verificación -->
                                    <div class="verificacion-item">
                                        <label for="verificacion">Verificación:</label>
                                        <select name="verificacion">
                                            <option value="" disabled selected>Seleccione..</option>
                                            <option value="Ok">Ok</option>
                                            <option value="No OK">No OK</option>
                                        </select>
                                    </div>
                                    <!-- Contenedor de checkbox de incidencia -->
                                    <div class="incidencia-item">
                                        <label for="incidencia">Marque si es incidencia:</label>
                                        <input type="checkbox" class="incidencia-checkbox">
                                        <input type="hidden" name="incidencia" value="Incidencia">
                                    </div>
                                </div>
                               <!-- Contenedor 5: de subida de archivos -->
                               <div class="archivo-item">
                                <input type="file" id="${uniqueId}" class="archivo-input" style="display: none;" onchange="mostrarNombreArchivo(this)">
                                <button type="button" class="archivo-boton" onclick="document.getElementById('${uniqueId}').click();">
                                    📁 Subir archivo
                                </button>
                                <span class="archivo-nombre">Archivo no seleccionado</span>
                                </div>
                                
                                <!-- Columna 6: Botón eliminar -->
                                <button type="button" class="btn-eliminar" onclick="eliminarDescripcion(this)" title="Eliminar">
                                    <i class="fa fa-trash"></i>
                                </button>  
                            </div>
                        </div>
                        <button type="button" class="btn-agregar" onclick="agregarDescripcion()">
                            <i class="fas fa-plus-circle"></i> Agregar nueva descripción
                        </button>                
                    </div>
                                   
                    <!-- Campo Observaciones -->
                    <div class="form-group">
                        <label for="observaciones">Observaciones (opcional):</label>
                        <textarea id="observaciones" name="observaciones" rows="5" placeholder="Anote cualquier observación relevante"></textarea>
                    </div>
                    <button type="submit" class="btn-enviar">
                        <i class="fas fa-paper-plane"></i> Enviar Parte
                    </button>  
                </form>
            </div>
        </div>
    </main>

    <!-- Pie de página -->

    <footer class="footer">
        <div class="footer-container">
            <!-- Redes sociales -->
            <div class="footer-social">
                <div class="social-box">
                    <p>Síguenos en:</p>
                    <div class="social-icons">
                        <div class="social-item">
                            <a href="https://twitter.com/aena" target="_blank" aria-label="Twitter">
                                <i class="fab fa-x-twitter"></i>
                            </a>
                        </div>
                        <div class="social-item">
                            <a href="http://www.facebook.com/Aena.es" target="_blank" aria-label="Facebook">
                                <i class="fab fa-facebook-f"></i>
                            </a>
                        </div>
                        <div class="social-item">
                            <a href="https://www.instagram.com/aena.es/" target="_blank" aria-label="Instagram">
                                <i class="fab fa-instagram"></i>
                            </a>
                        </div>
                        <div class="social-item">
                            <a href="https://www.linkedin.com/company/aena" target="_blank" aria-label="LinkedIn">
                                <i class="fab fa-linkedin-in"></i>
                            </a>
                        </div>
                    </div>
                </div>
            </div>         
            <div class="footer-divider"></div> <!-- Línea divisoria -->
            <!-- Enlaces y copyright -->
            <div class="footer-links-copyright">
                <div class="footer-links">
                    <nav>
                        <ul>
                            <li><a href="#">Mapa Web</a></li>
                            <li><a href="#">Contacto</a></li>
                            <li><a href="#">Cookies</a></li>
                            <li><a href="#">Aviso Legal</a></li>
                            <li><a href="#">Política de Privacidad</a></li>
                            <li><a href="#">Accesibilidad</a></li>
                            <li><a href="#">Trámites y Reclamaciones</a></li>
                            <li><a href="#">Canal de Denuncias</a></li>
                        </ul>
                    </nav>
                </div>
                <div class="footer-copyright">
                    <p>Copyright © 2025 Aena</p>
                </div>
                <div class="scroll-progress" id="scrollProgress"></div> <!-- Línea verde dinámica -->
                <a href="#top" class="scroll-to-top">SUBIR</a>      
            </div>
        </div>
    </footer>


      
    <script src="js/utils/config-encabezado-pie.js"></script>
    <script src="js/utils/config-fecha-hora.js"></script>
    <script src="js/parte-servicio-descripcion.js"></script>
    <script src="js/utils/config-api-url.js"></script>
    <script src="js/api/auth.js"></script> <!-- token y authentication-->
    <script src="js/api/api-parte-servicio.js"></script> 


</body>
</html>
